{% extends 'base.html' %}

{% block body %}

{% for word in content %}
<span onclick="clicktotranslate(this)" class="on_hover_text_decoration_underline">{{ word }}</span>&nbsp;
{% endfor %}

<div id="translated" style="border: 1px solid gray; padding: 1%; margin-top: 1%; text-align: center; direction: ltr;"></div>

<script>
    function clicktotranslate(e) {
        var translated = document.getElementById('translated');
        word = e.innerHTML;
        $.ajax({
            url: '/translate',
            type: 'POST',
            data: {
                word: word
            },
            success: function(data) {
                console.log(data);
                translated.innerHTML = `<b style="text-decoration: underline; cursor: pointer;"><span onclick="idonotknow(` +data.id+ `)">` +data.word+ `</span></b>`;
                    }
            });
        }

    function idonotknow(word_id) {
        $.ajax({
            url: '/i-do-not-know',
            type: 'POST',
            data: {
                text_id: {{ text_id }},
                word_id: word_id
            },
            success: function(data) { }
            });
        }
</script>

{% endblock %}